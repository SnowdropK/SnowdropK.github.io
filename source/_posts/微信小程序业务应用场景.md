---
title: 微信小程序业务应用场景
date: 2018-11-06 18:06:37
tags:
---
1、授权登录

2、带参数跳转到新页面，展示对应详情和列表。可将参数放在url中，在对应页面onload的options中获取，之后在对应页面向后台请求获取数据，也可以将数据变成字符串放在url中一起传过去（对象则要变成字符串）。
```
    let obj = JSON.stringify(this.data.obj)
    wx.navigateTo({
        url: `${obj}?obj=${obj}`,
    })
    
    onLoad: function (options) {
        let obj = JSON.parse(options.obj);
    }
```

<!-- more -->

3、分页：列表下拉刷新，展示新数据，上拉加载历史数据（用到pageSize、page以及getList()），因为公共调用getList()，还要设置两个布尔值判断下拉还是上拉。
```
    //判断page是不是1
    list: page == 1 ? data : list.concat(data),
```

4、点击展示右侧弹窗，展示不同的内容。展示的popup弹窗是同一个，循环展示的currentList根据dataset点击传过来的selectType向后台请求获取数据，最终赋值给currentList。

5、将数据改成object对象模式，适用于多层循环的场景，用于传入需要的键，减少循环的次数。
```
for(var item in object){
    item //键
    Object[item] //值
}
```

6、两个异步方法，有一定的先后执行顺序，可使用promise封装，在成功调用其中一个函数之后，将需要的数据通过resolve，作为参数传递到另一个方法中。
```
asyncFunc: function () {
    return new Promise((resolve, reject)=> {
      resolve(list)
    })
}
asyncFunc.then(list =>{})
```

7、tab栏，数据变化展示：点击哪个按钮，当前的currentBillType的值就改为点击按钮的dataset传过来的值，因此按钮样式就会变化，之后css样式利用三元进行判断，同时将type当作值传给后台，获取面板更新的数据。
```
class="label {{ item.value === status ? 'label-primary' : '' }}"

handleee(e){
    let { type } = event.target.dataset;
    this.setData({ type }, () => {
         this.getList(type);
    })
}
```

8、多选之后，展示选择出来的数据，最好使用数组保存数据，再进行增删，使用字符串的splace则会替换掉相同的字符。