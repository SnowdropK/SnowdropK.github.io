<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中国电影制片厂分布图</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #dfb293;
            overflow: :hidden;
        }
        
        #main {
            width: 100%;
            height: 690px;
            background: #FFFFF0;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .container {
            max-width: 1500px;
            margin: 0 auto;
        }
        
        /* 为电影制片厂添加提示信息 */
        .studio-hint {
            text-align: center;
            margin-bottom: 15px;
            padding: 10px;
            background: linear-gradient(55deg, #8f3d38, #8f3d38);
            color: black;
            border-radius: 5px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        
        .bottom-navigation {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            background: #772424;
            padding: 10px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            flex-direction: row;
        }

        .nav-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0);
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .nav-icon:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
            scale: 1.1;
        }

        .nav-icon img {
            max-width: 32px;
            max-height: 32px;
            width: auto;
            height: auto;
            object-fit: contain;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.02); opacity: 0.9; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- 右上角导航图标栏 -->
    <div class="bottom-navigation">
        <a href="https://snowdropk.github.io/" class="nav-icon" id="home-icon">
            <img src="icon/home.png" alt="首页">
        </a>
        <a href="https://snowdropk.github.io/movie" class="nav-icon" id="movie-icon">
            <img src="icon/movie.png" alt="电影">
        </a>
        <a href="https://snowdropk.github.io/data" class="nav-icon" id="data-icon">
            <img src="icon/data.png" alt="数据">
        </a>
        <a href="https://snowdropk.github.io/photo" class="nav-icon" id="photo-icon">
            <img src="icon/photo.png" alt="照片">
        </a>
        <a href="https://snowdropk.github.io/chat" class="nav-icon" id="person-icon">
            <img src="icon/person.png" alt="人物">
        </a>
        <a href="https://snowdropk.github.io/poster" class="nav-icon" id="draw-icon">
            <img src="icon/draw.png" alt="绘画">
        </a>
    </div>

    <div class="container">
        
        <div id="main"></div>
        
        <!-- 详细信息面板 -->
        <div id="detail-panel" style="display: none; margin-top: 20px; padding: 20px; background: #FFFFF0; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
            <div id="detail-content"></div>
            <button onclick="closeDetailPanel()" style="margin-top: 15px; padding: 8px 16px; background: #772424; color: white; border: none; border-radius: 4px; cursor: pointer;">关闭</button>
        </div>
    </div>

    <script src="https://fastly.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <script>
        var ROOT_PATH = 'https://geo.datav.aliyun.com/areas_v3/bound';
        
        var chartDom = document.getElementById('main');
        var myChart = echarts.init(chartDom);
        var option;

        function createChart() {
            var chinaRoughLatitude = 36; // 中国大致纬度
            option = {
                title: {
                    text: '中国电影制片厂分布图',
                    left: 'center',
                    top: 20,
                    textStyle: {
                        fontSize: 20,
                        color: '#333'
                    }
                },
                geo: {
                    map: 'china',
                    roam: true,
                    aspectScale: Math.cos((chinaRoughLatitude * Math.PI) / 180),
                    zoom: 1.2,
                    center: [105, 36],
                    label: {
                        show: true,
                        textBorderColor: '#fff',
                        textBorderWidth: 2,
                        fontSize: 11,
                        color: '#333'
                    },
                    itemStyle: {
                        areaColor: '#c58a99',
                        borderColor: '#926a88',
                        borderWidth: 1
                    },
                    emphasis: {
                        itemStyle: {
                            areaColor: '#e1788b'
                        },
                        label: {
                            color: 'black',
                            fontWeight: 'bold'
                        }
                    }
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        if (params.componentType === 'series' && params.data && params.data.type === 'studio') {
                            return `<div style="max-width: 300px;">
                                <strong style="color: #8f3d38; font-size: 20px;">⭐ ${params.name}</strong><br/>
                                <span style="color: #000000; font-size: 12px;">坐标: [${params.value[0].toFixed(2)}, ${params.value[1].toFixed(2)}]</span><br/>
                                <div style="color: #000000;margin-top: 8px; line-height: 1.4; font-size: 12px;">
                                    位置: ${params.data.position}
                                </div>
                            </div>`;
                        } else if (params.componentType === 'series') {
                            return params.name + '<br/>坐标: [' + params.value[0].toFixed(2) + ', ' + params.value[1].toFixed(2) + ']';
                        }
                        return params.name;
                    }
                },
                series: [
                    {
                        type: 'scatter',
                        coordinateSystem: 'geo',
                        animation: true,
                        animationDuration: 1000,
                        animationEasing: 'elasticOut',
                        data: [

                            { 
                                name: '长春电影制片厂', 
                                value: [125.3150, 43.8050],
                                position: '红旗街道红旗街1118号',
                                work: '《白毛女》《上甘岭》《英雄儿女》',
                                type: 'studio',
                                description: '长春电影制片厂，简称"长影"，成立于1945年10月1日，是新中国第一家电影制片厂，被誉为"新中国电影的摇篮"。<br>长影先后拍摄故事影片900多部，译制各国影片1000多部。代表作品有《白毛女》《五朵金花》《刘三姐》《英雄儿女》《甲午风云》等经典影片。'
                            },
                            { 
                                name: '西安电影制片厂', 
                                value: [108.9500, 34.3300],
                                type: 'studio',
                                description: '西安电影制片厂，简称"西影"，成立于1958年8月，是中国重要的电影制片基地之一。西影以拍摄农村题材、历史题材和儿童题材影片著称。代表作品有《人生》《老井》《红高粱》《大话西游》《霸王别姬》等经典影片，培养了众多著名导演和演员。'
                            },
                            { 
                                name: '上海电影制片厂', 
                                value: [121.438159,31.186874],
                                type: 'studio',
                                description: '西安电影制片厂，简称"西影"，成立于1958年8月，是中国重要的电影制片基地之一。西影以拍摄农村题材、历史题材和儿童题材影片著称。代表作品有《人生》《老井》《红高粱》《大话西游》《霸王别姬》等经典影片，培养了众多著名导演和演员。'
                            },
                        ],

                        itemStyle: {
                            color: function(params) {
                                return (params.data && params.data.type === 'studio') ? '#8f3d38' : '#ff6b35';
                            },
                            borderColor: function(params) {
                                return (params.data && params.data.type === 'studio') ? '#fff' : '#fff';
                            },
                            borderWidth: function(params) {
                                return (params.data && params.data.type === 'studio') ? 3 : 2;
                            },
                            shadowColor: function(params) {
                                return (params.data && params.data.type === 'studio') ? '#ff1744' : 'transparent';
                            },
                            shadowBlur: function(params) {
                                return (params.data && params.data.type === 'studio') ? 10 : 0;
                            }
                        },
                        symbol: function(params) {
                            return (params.data && params.data.type === 'studio') ? 'star' : 'circle';
                        },
                        symbolSize: function(params) {
                            return (params.data && params.data.type === 'studio') ? 25 : 8;
                        },
                        label: {
                            show: true,
                            position: 'right',
                            fontSize: function(params) {
                                return (params.data && params.data.type === 'studio') ? 13 : 10;
                            },
                            color: function(params) {
                                return (params.data && params.data.type === 'studio') ? '#ff1744' : '#333';
                            },
                            fontWeight: function(params) {
                                return (params.data && params.data.type === 'studio') ? 'bold' : 'normal';
                            },
                            formatter: function(params) {
                                return (params.data && params.data.type === 'studio') ? '⭐ ' + params.name : params.name;
                            },
                            textBorderColor: function(params) {
                                return (params.data && params.data.type === 'studio') ? '#fff' : 'transparent';
                            },
                            textBorderWidth: function(params) {
                                return (params.data && params.data.type === 'studio') ? 2 : 0;
                            }
                        },
                        emphasis: {
                            itemStyle: {
                                color: function(params) {
                                    return (params.data && params.data.type === 'studio') ? '#ff4569' : '#ff8a65';
                                },
                                borderColor: '#fff',
                                borderWidth: function(params) {
                                    return (params.data && params.data.type === 'studio') ? 4 : 3;
                                },
                                shadowColor: function(params) {
                                    return (params.data && params.data.type === 'studio') ? '#ff1744' : '#ff6b35';
                                },
                                shadowBlur: function(params) {
                                    return (params.data && params.data.type === 'studio') ? 15 : 5;
                                }
                            },
                            symbolSize: function(params) {
                                return (params.data && params.data.type === 'studio') ? 30 : 12;
                            }
                        }
                    }
                ]
            };
            myChart.setOption(option);
            
            // 添加点击事件
            myChart.on('click', function(params) {
                if (params.componentType === 'series' && params.data && params.data.type === 'studio') {
                    showDetailPanel(params.data);
                }
            });
        }
        
        // 显示详细信息面板
        function showDetailPanel(studioData) {
            const detailContent = document.getElementById('detail-content');
            const detailPanel = document.getElementById('detail-panel');
            
            detailContent.innerHTML = `
                <h2 style="color: #000001; margin-bottom: 15px; text-shadow: 0 2px 4px rgba(0,23,68,0.3);">
                    ⭐ ${studioData.name}
                </h2>
                <div style="background: #fff3e7; padding: 15px; border-radius: 5px; line-height: 1.6;">
                    <p style="margin-bottom: 10px;">
                        <strong>📍 地理位置：</strong>
                        ${studioData.position}
                    </p>
                    <p style="margin-bottom: 10px;">
                        <strong>🎦 作品：</strong>
                        ${studioData.work}°
                    </p>
                    <p style="margin-bottom: 15px;">
                        <strong>📖 详细信息：</strong>
                    </p>
                    <p style="text-indent: 2em; color: #555;">
                        ${studioData.description}
                    </p>
                </div>
            `;
            
            detailPanel.style.display = 'block';
            detailPanel.scrollIntoView({ behavior: 'smooth' });
        }
        
        // 关闭详细信息面板
        function closeDetailPanel() {
            document.getElementById('detail-panel').style.display = 'none';
        }

        function fetchGeoJSON() {
            myChart.showLoading();
            
            // 尝试加载中国地图数据
            fetch('https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json')
                .then(response => response.json())
                .then(geoJSON => {
                    echarts.registerMap('china', geoJSON);
                    createChart();
                    myChart.hideLoading();
                })
                .catch(error => {
                    console.warn('外部地图数据加载失败，使用内嵌数据');
                    
                    // 备用方案：使用内嵌的简化中国地图数据
                    const simplifiedChinaGeoJSON = {
                        "type": "FeatureCollection",
                        "features": [
                            {
                                "type": "Feature",
                                "properties": { "name": "北京" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[116.0, 39.4], [117.0, 39.4], [117.0, 40.4], [116.0, 40.4], [116.0, 39.4]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "天津" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[117.0, 38.7], [118.0, 38.7], [118.0, 39.7], [117.0, 39.7], [117.0, 38.7]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "河北" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[113.5, 36.0], [119.5, 36.0], [119.5, 42.5], [113.5, 42.5], [113.5, 36.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "山西" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[110.5, 34.5], [114.5, 34.5], [114.5, 40.5], [110.5, 40.5], [110.5, 34.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "内蒙古" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[97.0, 37.5], [126.0, 37.5], [126.0, 53.5], [97.0, 53.5], [97.0, 37.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "辽宁" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[118.5, 38.5], [125.5, 38.5], [125.5, 43.5], [118.5, 43.5], [118.5, 38.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "吉林" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[121.5, 41.5], [131.5, 41.5], [131.5, 46.5], [121.5, 46.5], [121.5, 41.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "黑龙江" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[121.0, 43.0], [135.0, 43.0], [135.0, 54.0], [121.0, 54.0], [121.0, 43.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "上海" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[121.0, 30.8], [122.0, 30.8], [122.0, 31.8], [121.0, 31.8], [121.0, 30.8]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "江苏" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[116.5, 30.5], [122.0, 30.5], [122.0, 35.5], [116.5, 35.5], [116.5, 30.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "浙江" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[118.0, 27.5], [123.0, 27.5], [123.0, 31.5], [118.0, 31.5], [118.0, 27.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "安徽" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[114.5, 29.5], [119.5, 29.5], [119.5, 35.0], [114.5, 35.0], [114.5, 29.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "福建" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[115.5, 23.5], [120.5, 23.5], [120.5, 28.5], [115.5, 28.5], [115.5, 23.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "江西" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[113.5, 24.5], [118.5, 24.5], [118.5, 30.5], [113.5, 30.5], [113.5, 24.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "山东" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[114.5, 34.5], [122.5, 34.5], [122.5, 38.5], [114.5, 38.5], [114.5, 34.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "河南" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[110.5, 31.5], [116.5, 31.5], [116.5, 36.5], [110.5, 36.5], [110.5, 31.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "湖北" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[108.5, 29.0], [116.5, 29.0], [116.5, 33.5], [108.5, 33.5], [108.5, 29.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "湖南" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[108.5, 24.5], [114.5, 24.5], [114.5, 30.5], [108.5, 30.5], [108.5, 24.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "广东" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[109.5, 20.0], [117.5, 20.0], [117.5, 25.5], [109.5, 25.5], [109.5, 20.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "广西" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[104.5, 20.5], [112.5, 20.5], [112.5, 26.5], [104.5, 26.5], [104.5, 20.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "海南" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[108.5, 18.0], [111.5, 18.0], [111.5, 20.5], [108.5, 20.5], [108.5, 18.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "重庆" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[105.5, 28.5], [110.5, 28.5], [110.5, 32.5], [105.5, 32.5], [105.5, 28.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "四川" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[97.5, 26.0], [109.0, 26.0], [109.0, 34.0], [97.5, 34.0], [97.5, 26.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "贵州" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[103.5, 24.5], [109.5, 24.5], [109.5, 29.5], [103.5, 29.5], [103.5, 24.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "云南" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[97.0, 21.0], [106.0, 21.0], [106.0, 29.0], [97.0, 29.0], [97.0, 21.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "西藏" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[78.0, 26.5], [99.0, 26.5], [99.0, 36.5], [78.0, 36.5], [78.0, 26.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "陕西" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[105.5, 31.5], [111.5, 31.5], [111.5, 39.5], [105.5, 39.5], [105.5, 31.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "甘肃" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[92.0, 32.0], [109.0, 32.0], [109.0, 43.0], [92.0, 43.0], [92.0, 32.0]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "青海" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[89.0, 31.5], [103.0, 31.5], [103.0, 39.5], [89.0, 39.5], [89.0, 31.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "宁夏" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[104.5, 35.5], [107.5, 35.5], [107.5, 39.5], [104.5, 39.5], [104.5, 35.5]]]
                                }
                            },
                            {
                                "type": "Feature",
                                "properties": { "name": "新疆" },
                                "geometry": {
                                    "type": "Polygon",
                                    "coordinates": [[[73.0, 34.0], [96.0, 34.0], [96.0, 49.0], [73.0, 49.0], [73.0, 34.0]]]
                                }
                            }
                        ]
                    };
                    
                    echarts.registerMap('china', simplifiedChinaGeoJSON);
                    createChart();
                    myChart.hideLoading();
                });
        }
        
        // 响应式处理
        window.addEventListener('resize', function() {
            if (myChart) {
                myChart.resize();
            }
        });

        // 等待ECharts加载完成后初始化
        function init() {
            if (typeof echarts !== 'undefined') {
                fetchGeoJSON();
            } else {
                setTimeout(init, 100);
            }
        }
        
        // 页面加载完成后开始初始化
        window.addEventListener('load', init);
    </script>
</body>
</html> 